{"ast":null,"code":"import history from '../history';\nimport Axios from 'axios';\nconst BASE_URL = process.env.NODE_ENV === 'production' ? '/api' : '//localhost:3030/api'; // const BASE_URL = process.env.NODE_ENV === 'http://bot.50webs.org/api/getCouponSearch.api.php';\n// const BASE_URL = process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030/';\n\nvar axios = Axios.create({\n  withCredentials: false\n});\nexport default {\n  get(endpoint, data, params) {\n    return ajax(endpoint, 'GET', data, params);\n  },\n\n  post(endpoint, data, params) {\n    console.log(\"endpoint  \", endpoint);\n    return ajax(endpoint, 'POST', data, params);\n  },\n\n  put(endpoint, data, params) {\n    return ajax(endpoint, 'PUT', data, params);\n  },\n\n  delete(endpoint, data, params) {\n    return ajax(endpoint, 'DELETE', data, params);\n  }\n\n};\n\nasync function ajax(endpoint, method = 'get', data = null, params = null, dispatch) {\n  console.log(\"BASE_URL ------ >> \", BASE_URL);\n  console.log(\"endpoint ------ >> \", endpoint); // console.log(\"data ------ >> \",data)\n\n  console.log(typeof data);\n\n  if (data !== null) {\n    // console.log(\"parse ------ >> \",data)\n    data = JSON.parse(data);\n  }\n\n  try {\n    console.log(\"method ------ >> \", method);\n    var res = await axios({\n      url: `${BASE_URL}${endpoint}`,\n      method,\n      data,\n      params\n    });\n    console.log(\"res.data ------ >> \", res);\n    return res.data;\n  } catch (err) {\n    console.log(\"err\");\n    console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}, with params: ${params}`);\n    console.dir(err);\n\n    if (err.response && err.response.status === 401) {\n      history.push('/'); // diaspatch ('authorization error')\n    } // diaspatch ('error')\n\n\n    throw err;\n  }\n}","map":{"version":3,"sources":["C:/Users/eranl/OneDrive/שולחן העבודה/benefixMe/frontend/src/services/HttpService.js"],"names":["history","Axios","BASE_URL","process","env","NODE_ENV","axios","create","withCredentials","get","endpoint","data","params","ajax","post","console","log","put","delete","method","dispatch","JSON","parse","res","url","err","dir","response","status","push"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,YAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,MAAxC,GAAiD,sBAAlE,C,CACA;AACA;;AACA,IAAIC,KAAK,GAAGL,KAAK,CAACM,MAAN,CAAa;AACvBC,EAAAA,eAAe,EAAE;AADM,CAAb,CAAZ;AAIA,eAAe;AACbC,EAAAA,GAAG,CAACC,QAAD,EAAWC,IAAX,EAAiBC,MAAjB,EAAyB;AAC1B,WAAOC,IAAI,CAACH,QAAD,EAAW,KAAX,EAAkBC,IAAlB,EAAwBC,MAAxB,CAAX;AACD,GAHY;;AAIbE,EAAAA,IAAI,CAACJ,QAAD,EAAWC,IAAX,EAAiBC,MAAjB,EAAyB;AAC3BG,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyBN,QAAzB;AACA,WAAOG,IAAI,CAACH,QAAD,EAAW,MAAX,EAAmBC,IAAnB,EAAyBC,MAAzB,CAAX;AACD,GAPY;;AAQbK,EAAAA,GAAG,CAACP,QAAD,EAAWC,IAAX,EAAiBC,MAAjB,EAAyB;AAE1B,WAAOC,IAAI,CAACH,QAAD,EAAW,KAAX,EAAkBC,IAAlB,EAAwBC,MAAxB,CAAX;AACD,GAXY;;AAYbM,EAAAA,MAAM,CAACR,QAAD,EAAWC,IAAX,EAAiBC,MAAjB,EAAyB;AAC7B,WAAOC,IAAI,CAACH,QAAD,EAAW,QAAX,EAAqBC,IAArB,EAA2BC,MAA3B,CAAX;AACD;;AAdY,CAAf;;AAiBA,eAAeC,IAAf,CAAoBH,QAApB,EAA8BS,MAAM,GAAG,KAAvC,EAA8CR,IAAI,GAAG,IAArD,EAA2DC,MAAM,GAAG,IAApE,EAA0EQ,QAA1E,EAAoF;AACjFL,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAkCd,QAAlC;AACAa,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAkCN,QAAlC,EAFiF,CAGlF;;AACAK,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAOL,IAAnB;;AACA,MAAIA,IAAI,KAAK,IAAb,EAAmB;AACjB;AACAA,IAAAA,IAAI,GAAGU,IAAI,CAACC,KAAL,CAAWX,IAAX,CAAP;AACD;;AAED,MAAI;AACFI,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAgCG,MAAhC;AACA,QAAII,GAAG,GAAG,MAAMjB,KAAK,CAAC;AACpBkB,MAAAA,GAAG,EAAG,GAAEtB,QAAS,GAAEQ,QAAS,EADR;AAEpBS,MAAAA,MAFoB;AAGpBR,MAAAA,IAHoB;AAIpBC,MAAAA;AAJoB,KAAD,CAArB;AAQAG,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAkCO,GAAlC;AACA,WAAOA,GAAG,CAACZ,IAAX;AACD,GAZD,CAYE,OAAOc,GAAP,EAAY;AACZV,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAa,cAAaG,MAAO,iCAAgCT,QAAS,gBAAeC,IAAK,kBAAiBC,MAAO,EAAtH;AACAG,IAAAA,OAAO,CAACW,GAAR,CAAYD,GAAZ;;AACA,QAAIA,GAAG,CAACE,QAAJ,IAAgBF,GAAG,CAACE,QAAJ,CAAaC,MAAb,KAAwB,GAA5C,EAAiD;AAC/C5B,MAAAA,OAAO,CAAC6B,IAAR,CAAa,GAAb,EAD+C,CAE/C;AACD,KAPW,CAQZ;;;AACA,UAAMJ,GAAN;AACD;AACF","sourcesContent":["import history from '../history';\r\nimport Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production' ? '/api' : '//localhost:3030/api';\r\n// const BASE_URL = process.env.NODE_ENV === 'http://bot.50webs.org/api/getCouponSearch.api.php';\r\n// const BASE_URL = process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030/';\r\nvar axios = Axios.create({\r\n  withCredentials: false,\r\n});\r\n\r\nexport default {\r\n  get(endpoint, data, params) {\r\n    return ajax(endpoint, 'GET', data, params);\r\n  },\r\n  post(endpoint, data, params) {\r\n    console.log(\"endpoint  \",endpoint)\r\n    return ajax(endpoint, 'POST', data, params);\r\n  },\r\n  put(endpoint, data, params) {\r\n\r\n    return ajax(endpoint, 'PUT', data, params);\r\n  },\r\n  delete(endpoint, data, params) {\r\n    return ajax(endpoint, 'DELETE', data, params);\r\n  },\r\n};\r\n\r\nasync function ajax(endpoint, method = 'get', data = null, params = null, dispatch) {\r\n   console.log(\"BASE_URL ------ >> \",BASE_URL)\r\n   console.log(\"endpoint ------ >> \",endpoint)\r\n  // console.log(\"data ------ >> \",data)\r\n  console.log(typeof(data))\r\n  if (data !== null ){\r\n    // console.log(\"parse ------ >> \",data)\r\n    data = JSON.parse(data)\r\n  }\r\n\r\n  try {\r\n    console.log(\"method ------ >> \",method)\r\n    var res = await axios({\r\n      url: `${BASE_URL}${endpoint}`,\r\n      method,\r\n      data ,\r\n      params,\r\n    });\r\n    \r\n    \r\n    console.log(\"res.data ------ >> \",res)\r\n    return res.data;\r\n  } catch (err) {\r\n    console.log(\"err\")\r\n    console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}, with params: ${params}`);\r\n    console.dir(err);\r\n    if (err.response && err.response.status === 401) {\r\n      history.push('/');\r\n      // diaspatch ('authorization error')\r\n    }\r\n    // diaspatch ('error')\r\n    throw err;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}